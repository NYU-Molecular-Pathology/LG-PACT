---
title: "NGS580 Analysis Report"
author: '`r Sys.info()[["user"]] `'
date: '`r format(Sys.time(), "%B %d, %Y")`'
output:
  pdf_document:
    keep_tex: yes
    number_sections: yes
    toc: yes
    df_print: kable
  html_document:
    css: styles.css
    df_print: paged
    keep_md: yes
    number_sections: yes
    toc: yes
bibliography: citations.bib
params:
  child: !r c("targets.Rmd", "samples.Rmd", "failed.Rmd","reads.Rmd", "coverage.samples.Rmd", "coverage.intervals.Rmd", "variants.Rmd", "signatures.Rmd")
  input_dir: input
  annotations_file: annotations.tsv
  samplesheet_file: samplesheet.tsv
  sample_coverage_file: coverage.samples.tsv
  interval_coverage_file: coverage.intervals.tsv
  meta_file: meta.tsv
  reads_dedup_table: reads.dedup.tsv
  flagstat_table: flagstat.tsv
  dedup_flagstat_table: flagstat.dedup.tsv
  targets_metrics_table: targets.metrics.tsv
  failed_log: failed.tsv
  failed_pairs_log: failed.pairs.tsv
  targets_annotations_file: targets.annotations.tsv
  signatures_weights_file: signatures.weights.tsv
---
```{r setup, include=FALSE}
# This is the main parent report file, loads and compiles all child documents for the report
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(fig.height = 12)
knitr::opts_chunk$set(fig.width = 12)
library("knitr")
library("ggplot2")
library("reshape2")
library("DT")
# ~~~~~~~ CONFIGS ~~~~~~~ #
pwd <- getwd()
child <- params$child
start_child <- c("overview.Rmd")
end_child <- c("sysinfo.Rmd")
child_docs <- c(start_child, child, end_child)

# save environment to file
save.image(file = 'loaded.Rdata', compress = TRUE)
```

```{r compile_child, results='asis'}
# load and compile each child doc
for(child_doc in child_docs){
    cat(knit_child(child_doc, quiet = TRUE))
    cat('\n')
}
```

```{r save_image}
# save environment to file
save.image(file="final.Rdata",compress = TRUE)
```

# References
